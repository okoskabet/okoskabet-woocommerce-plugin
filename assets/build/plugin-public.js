(()=>{"use strict";new Set;const e="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;class t{_listeners="WeakMap"in e?new WeakMap:void 0;_observer=void 0;options;constructor(e){this.options=e}observe(e,t){return this._listeners.set(e,t),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){return this._observer??(this._observer=new ResizeObserver((e=>{for(const n of e)t.entries.set(n.target,n),this._listeners.get(n.target)?.(n)})))}}t.entries="WeakMap"in e?new WeakMap:void 0;let n,o=!1;function s(e,t){e.appendChild(t)}function i(e,t,n){e.insertBefore(t,n||null)}function l(e){e.parentNode&&e.parentNode.removeChild(e)}function r(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function c(e){return document.createElement(e)}function d(e){return document.createTextNode(e)}function a(){return d(" ")}function u(){return d("")}function h(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function p(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function $(e,t){t=""+t,e.data!==t&&(e.data=t)}function f(e,t){e.value=null==t?"":t}function m(e,t,n,o){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function g(e,t,n){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}function v(e){const t=e.querySelector(":checked");return t&&t.__value}function y(e,t,n){e.classList.toggle(t,!!n)}function _(){}function b(e){return e()}function k(){return Object.create(null)}function w(e){e.forEach(b)}function S(e){return"function"==typeof e}function x(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function D(e){return null==e?"":e}function O(e){n=e}function C(){if(!n)throw new Error("Function called outside component initialization");return n}function E(e){C().$$.on_mount.push(e)}function L(e){C().$$.on_destroy.push(e)}new Map;const M=[],A=[];let j=[];const N=[],I=Promise.resolve();let T=!1;function B(e){j.push(e)}const P=new Set;let q=0;function z(){if(0!==q)return;const e=n;do{try{for(;q<M.length;){const e=M[q];q++,O(e),F(e.$$)}}catch(e){throw M.length=0,q=0,e}for(O(null),M.length=0,q=0;A.length;)A.pop()();for(let e=0;e<j.length;e+=1){const t=j[e];P.has(t)||(P.add(t),t())}j.length=0}while(M.length);for(;N.length;)N.pop()();T=!1,P.clear(),O(e)}function F(e){if(null!==e.fragment){e.update(),w(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(B)}}const R=new Set;let Q,U;function W(){Q={r:0,c:[],p:Q}}function H(){Q.r||w(Q.c),Q=Q.p}function G(e,t){e&&e.i&&(R.delete(e),e.i(t))}function J(e,t,n,o){if(e&&e.o){if(R.has(e))return;R.add(e),Q.c.push((()=>{R.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}function Y(e){return void 0!==e?.length?e:Array.from(e)}function Z(e){e&&e.c()}function V(e,t,n){const{fragment:o,after_update:s}=e.$$;o&&o.m(t,n),B((()=>{const t=e.$$.on_mount.map(b).filter(S);e.$$.on_destroy?e.$$.on_destroy.push(...t):w(t),e.$$.on_mount=[]})),s.forEach(B)}function K(e,t){const n=e.$$;null!==n.fragment&&(function(e){const t=[],n=[];j.forEach((o=>-1===e.indexOf(o)?t.push(o):n.push(o))),n.forEach((e=>e())),j=t}(n.after_update),w(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function X(e,t,s,i,r,c,d=null,a=[-1]){const u=n;O(e);const h=e.$$={fragment:null,ctx:[],props:c,update:_,not_equal:r,bound:k(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:k(),dirty:a,skip_bound:!1,root:t.target||u.$$.root};d&&d(h.root);let p=!1;if(h.ctx=s?s(e,t.props||{},((t,n,...o)=>{const s=o.length?o[0]:n;return h.ctx&&r(h.ctx[t],h.ctx[t]=s)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](s),p&&function(e,t){-1===e.$$.dirty[0]&&(M.push(e),T||(T=!0,I.then(z)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),n})):[],h.update(),p=!0,w(h.before_update),h.fragment=!!i&&i(h.ctx),t.target){if(t.hydrate){o=!0;const e=($=t.target,Array.from($.childNodes));h.fragment&&h.fragment.l(e),e.forEach(l)}else h.fragment&&h.fragment.c();t.intro&&G(e.$$.fragment),V(e,t.target,t.anchor),o=!1,z()}var $;O(u)}function ee(e,t,n,o){const s=n[e]?.type;if(t="Boolean"===s&&"boolean"!=typeof t?null!=t:t,!o||!n[e])return t;if("toAttribute"===o)switch(s){case"Object":case"Array":return null==t?null:JSON.stringify(t);case"Boolean":return t?"":null;case"Number":return null==t?null:t;default:return t}else switch(s){case"Object":case"Array":return t&&JSON.parse(t);case"Boolean":default:return t;case"Number":return null!=t?+t:t}}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(U=class extends HTMLElement{$$ctor;$$s;$$c;$$cn=!1;$$d={};$$r=!1;$$p_d={};$$l={};$$l_u=new Map;constructor(e,t,n){super(),this.$$ctor=e,this.$$s=t,n&&this.attachShadow({mode:"open"})}addEventListener(e,t,n){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(t),this.$$c){const n=this.$$c.$on(e,t);this.$$l_u.set(t,n)}super.addEventListener(e,t,n)}removeEventListener(e,t,n){if(super.removeEventListener(e,t,n),this.$$c){const e=this.$$l_u.get(t);e&&(e(),this.$$l_u.delete(t))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){if(await Promise.resolve(),!this.$$cn||this.$$c)return;function e(e){return()=>{let t;return{c:function(){t=c("slot"),"default"!==e&&p(t,"name",e)},m:function(e,n){i(e,t,n)},d:function(e){e&&l(t)}}}}const t={},n=function(e){const t={};return e.childNodes.forEach((e=>{t[e.slot||"default"]=!0})),t}(this);for(const s of this.$$s)s in n&&(t[s]=[e(s)]);for(const r of this.attributes){const d=this.$$g_p(r.name);d in this.$$d||(this.$$d[d]=ee(d,r.value,this.$$p_d,"toProp"))}for(const a in this.$$p_d)a in this.$$d||void 0===this[a]||(this.$$d[a]=this[a],delete this[a]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:t,$$scope:{ctx:[]}}});const o=()=>{this.$$r=!0;for(const e in this.$$p_d)if(this.$$d[e]=this.$$c.$$.ctx[this.$$c.$$.props[e]],this.$$p_d[e].reflect){const t=ee(e,this.$$d[e],this.$$p_d,"toAttribute");null==t?this.removeAttribute(this.$$p_d[e].attribute||e):this.setAttribute(this.$$p_d[e].attribute||e,t)}this.$$r=!1};this.$$c.$$.after_update.push(o),o();for(const u in this.$$l)for(const h of this.$$l[u]){const $=this.$$c.$on(u,h);this.$$l_u.set(h,$)}this.$$l={}}}attributeChangedCallback(e,t,n){this.$$r||(e=this.$$g_p(e),this.$$d[e]=ee(e,n,this.$$p_d,"toProp"),this.$$c?.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then((()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$c=void 0)}))}$$g_p(e){return Object.keys(this.$$p_d).find((t=>this.$$p_d[t].attribute===e||!this.$$p_d[t].attribute&&t.toLowerCase()===e))||e}});class te{$$=void 0;$$set=void 0;$destroy(){K(this,1),this.$destroy=_}$on(e,t){if(!S(t))return _;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const ne=(e,t)=>{const n=t.replace("_","-"),o=new Date(e).toLocaleDateString(n,{year:"numeric",month:"long",day:"numeric",weekday:"long",timeZone:"UTC"});return o.charAt(0).toUpperCase()+o.slice(1)};function oe(e,t,n){let o,{map:s}=t,{origin:i}=t;return E((()=>{console.log("MOUNT ORIGIN MARKER",i);const e={lng:i.longitude,lat:i.latitude};o=(new window.mapboxgl.Marker).setLngLat(e).addTo(s)})),L((()=>{o.remove()})),e.$$set=e=>{"map"in e&&n(0,s=e.map),"origin"in e&&n(1,i=e.origin)},[s,i]}const se=class extends te{constructor(e){super(),X(this,e,oe,null,x,{map:0,origin:1})}};function ie(e){let t,n,o,r,u,h,f,m,g,v,b,k,w,S,x=e[0].name+"",D=e[0].address.address+"",O=e[0].address.postal_code+"",C=e[0].address.city+"";return{c(){t=c("div"),n=a(),o=c("div"),r=c("h6"),u=d(x),h=a(),f=c("div"),m=d(D),g=a(),v=c("div"),b=d(O),k=a(),w=d(C),p(t,"class","marker svelte-ge6ukn"),y(t,"selected",e[1]&&e[0].id===e[1].id),p(r,"class","svelte-ge6ukn"),p(o,"data-shed",S=e[0].id)},m(l,c){i(l,t,c),e[7](t),i(l,n,c),i(l,o,c),s(o,r),s(r,u),s(o,h),s(o,f),s(f,m),s(o,g),s(o,v),s(v,b),s(v,k),s(v,w),e[8](o)},p(e,[n]){3&n&&y(t,"selected",e[1]&&e[0].id===e[1].id),1&n&&x!==(x=e[0].name+"")&&$(u,x),1&n&&D!==(D=e[0].address.address+"")&&$(m,D),1&n&&O!==(O=e[0].address.postal_code+"")&&$(b,O),1&n&&C!==(C=e[0].address.city+"")&&$(w,C),1&n&&S!==(S=e[0].id)&&p(o,"data-shed",S)},i:_,o:_,d(s){s&&(l(t),l(n),l(o)),e[7](null),e[8](null)}}}function le(e,t,n){let o,s,i,{map:l}=t,{shed:r}=t,{selectedShed:c}=t,{onClick:d}=t,{onClickAway:a}=t;return E((()=>{const e={lng:r.address.longitude,lat:r.address.latitude},t=new window.mapboxgl.Popup({offset:20,closeButton:!1}).setDOMContent(s).on("open",(e=>{d(e.target)})).on("close",a);i=new window.mapboxgl.Marker({element:o}).setLngLat(e).setPopup(t).addTo(l)})),L((()=>{i.remove()})),e.$$set=e=>{"map"in e&&n(4,l=e.map),"shed"in e&&n(0,r=e.shed),"selectedShed"in e&&n(1,c=e.selectedShed),"onClick"in e&&n(5,d=e.onClick),"onClickAway"in e&&n(6,a=e.onClickAway)},[r,c,o,s,l,d,a,function(e){A[e?"unshift":"push"]((()=>{o=e,n(2,o)}))},function(e){A[e?"unshift":"push"]((()=>{s=e,n(3,s)}))}]}const re=class extends te{constructor(e){super(),X(this,e,le,ie,x,{map:4,shed:0,selectedShed:1,onClick:5,onClickAway:6})}};function ce(e,t,n){const o=e.slice();return o[9]=t[n],o}function de(e){let t,n,o,s=Y(e[2]),c=[];for(let t=0;t<s.length;t+=1)c[t]=ae(ce(e,s,t));const d=e=>J(c[e],1,1,(()=>{c[e]=null}));let h=e[1]&&ue(e);return{c(){for(let e=0;e<c.length;e+=1)c[e].c();t=a(),h&&h.c(),n=u()},m(e,s){for(let t=0;t<c.length;t+=1)c[t]&&c[t].m(e,s);i(e,t,s),h&&h.m(e,s),i(e,n,s),o=!0},p(e,o){if(109&o){let n;for(s=Y(e[2]),n=0;n<s.length;n+=1){const i=ce(e,s,n);c[n]?(c[n].p(i,o),G(c[n],1)):(c[n]=ae(i),c[n].c(),G(c[n],1),c[n].m(t.parentNode,t))}for(W(),n=s.length;n<c.length;n+=1)d(n);H()}e[1]?h?(h.p(e,o),2&o&&G(h,1)):(h=ue(e),h.c(),G(h,1),h.m(n.parentNode,n)):h&&(W(),J(h,1,1,(()=>{h=null})),H())},i(e){if(!o){for(let e=0;e<s.length;e+=1)G(c[e]);G(h),o=!0}},o(e){c=c.filter(Boolean);for(let e=0;e<c.length;e+=1)J(c[e]);J(h),o=!1},d(e){e&&(l(t),l(n)),r(c,e),h&&h.d(e)}}}function ae(e){let t,n;return t=new re({props:{map:e[3],shed:e[9],selectedShed:e[0],onClickAway:e[6],onClick:e[5](e[9])}}),{c(){Z(t.$$.fragment)},m(e,o){V(t,e,o),n=!0},p(e,n){const o={};8&n&&(o.map=e[3]),4&n&&(o.shed=e[9]),1&n&&(o.selectedShed=e[0]),4&n&&(o.onClick=e[5](e[9])),t.$set(o)},i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){J(t.$$.fragment,e),n=!1},d(e){K(t,e)}}}function ue(e){let t,n;return t=new se({props:{origin:e[1],map:e[3]}}),{c(){Z(t.$$.fragment)},m(e,o){V(t,e,o),n=!0},p(e,n){const o={};2&n&&(o.origin=e[1]),8&n&&(o.map=e[3]),t.$set(o)},i(e){n||(G(t.$$.fragment,e),n=!0)},o(e){J(t.$$.fragment,e),n=!1},d(e){K(t,e)}}}function he(e){let t,n,o,r,d,h=e[3]&&de(e);return{c(){t=c("div"),n=c("div"),o=a(),h&&h.c(),r=u(),p(n,"class","map svelte-1cepocy"),p(t,"class","map-wrap svelte-1cepocy")},m(l,c){i(l,t,c),s(t,n),e[8](n),i(l,o,c),h&&h.m(l,c),i(l,r,c),d=!0},p(e,[t]){e[3]?h?(h.p(e,t),8&t&&G(h,1)):(h=de(e),h.c(),G(h,1),h.m(r.parentNode,r)):h&&(W(),J(h,1,1,(()=>{h=null})),H())},i(e){d||(G(h),d=!0)},o(e){J(h),d=!1},d(n){n&&(l(t),l(o),l(r)),e[8](null),h&&h.d(n)}}}function pe(e,t,n){let o,s,i,{origin:l}=t,{sheds:r}=t,{selectedShed:c}=t;const d=()=>{n(7,i=void 0)};return E((()=>{const e=l?{lng:l.longitude,lat:l.latitude}:{lng:r[0].address.longitude,lat:r[0].address.latitude};n(3,o=new window.mapboxgl.Map({container:s,style:"mapbox://styles/mapbox/streets-v12",center:e,zoom:11}));const t=new window.mapboxgl.LngLatBounds;if(r.forEach((({address:{latitude:e,longitude:n}})=>{const o={lng:n,lat:e};t.extend(o)})),l){const e={lng:l.longitude,lat:l.latitude};t.extend(e)}o.fitBounds(t)})),L((()=>{o&&o.remove()})),e.$$set=e=>{"origin"in e&&n(1,l=e.origin),"sheds"in e&&n(2,r=e.sheds),"selectedShed"in e&&n(0,c=e.selectedShed)},e.$$.update=()=>{129&e.$$.dirty&&i&&i.shed.id!==c.id&&(i.popup.remove(),d())},[c,l,r,o,s,e=>t=>{n(0,c=e),n(7,i={popup:t,shed:e})},d,i,function(e){A[e?"unshift":"push"]((()=>{s=e,n(4,s)}))}]}const $e=class extends te{constructor(e){super(),X(this,e,pe,he,x,{origin:1,sheds:2,selectedShed:0})}};function fe(e,t,n){const o=e.slice();return o[17]=t[n],o}function me(e,t,n){const o=e.slice();return o[20]=t[n],o}function ge(e){let t,n,o,r,u,f,g,v,y,_,b,k,w,S,x,D,O,C,E,L,M,A=e[6].name+"",j=ne(e[7],e[2])+"";return{c(){t=c("div"),n=c("div"),o=d(e[3]),r=a(),u=c("div"),f=c("div"),g=c("span"),g.textContent="Økoskab:",v=a(),y=c("span"),_=d(A),b=a(),k=c("div"),w=c("span"),w.textContent="Levering:",S=a(),x=c("span"),D=d(j),O=a(),C=c("a"),C.textContent="Vælg Økoskab",p(n,"id","oko-descrption"),m(n,"margin-bottom","20px"),p(n,"class","svelte-1cot6h0"),p(g,"class","oko-shed-content-label svelte-1cot6h0"),p(y,"class","oko-shed-content-value svelte-1cot6h0"),p(f,"id","oko-shed-content-location"),p(w,"class","oko-shed-content-label svelte-1cot6h0"),p(x,"class","oko-shed-content-value svelte-1cot6h0"),p(k,"id","oko-shed-content-date"),p(u,"id","oko-shed-content"),p(u,"class","svelte-1cot6h0"),p(C,"href",E="#"),p(C,"class","button okoButtonModalOpen"),m(C,"margin-bottom","20px"),p(t,"id","oko-shed-custom-div-modal")},m(l,c){i(l,t,c),s(t,n),s(n,o),s(t,r),s(t,u),s(u,f),s(f,g),s(f,v),s(f,y),s(y,_),s(u,b),s(u,k),s(k,w),s(k,S),s(k,x),s(x,D),s(t,O),s(t,C),L||(M=h(C,"click",e[9]),L=!0)},p(e,t){8&t&&$(o,e[3]),64&t&&A!==(A=e[6].name+"")&&$(_,A),132&t&&j!==(j=ne(e[7],e[2])+"")&&$(D,j)},d(e){e&&l(t),L=!1,M()}}}function ve(e){let t,n,o,s,d,u=Y(e[5]),$=[];for(let t=0;t<u.length;t+=1)$[t]=ye(me(e,u,t));return{c(){t=c("div"),t.textContent="Økoskab",n=a(),o=c("select");for(let e=0;e<$.length;e+=1)$[e].c();p(t,"class","oko-select-headline"),m(t,"font-size","14px"),p(o,"name","okoLocations"),p(o,"id","locationsDropdown"),m(o,"width","100%"),m(o,"margin-top","0"),m(o,"margin-bottom","20px"),void 0===e[6]&&B((()=>e[13].call(o)))},m(l,r){i(l,t,r),i(l,n,r),i(l,o,r);for(let e=0;e<$.length;e+=1)$[e]&&$[e].m(o,null);g(o,e[6],!0),s||(d=h(o,"change",e[13]),s=!0)},p(e,t){if(32&t){let n;for(u=Y(e[5]),n=0;n<u.length;n+=1){const s=me(e,u,n);$[n]?$[n].p(s,t):($[n]=ye(s),$[n].c(),$[n].m(o,null))}for(;n<$.length;n+=1)$[n].d(1);$.length=u.length}96&t&&g(o,e[6])},d(e){e&&(l(t),l(n),l(o)),r($,e),s=!1,d()}}}function ye(e){let t,n,o,r,u=e[20].name+"";return{c(){t=c("option"),n=d(u),o=a(),t.__value=r=e[20],f(t,t.__value)},m(e,l){i(e,t,l),s(t,n),s(t,o)},p(e,o){32&o&&u!==(u=e[20].name+"")&&$(n,u),32&o&&r!==(r=e[20])&&(t.__value=r,f(t,t.__value))},d(e){e&&l(t)}}}function _e(e){let t,n,o,r,u=ne(e[17],e[2])+"";return{c(){t=c("option"),n=d(u),o=a(),t.__value=r=e[17],f(t,t.__value)},m(e,l){i(e,t,l),s(t,n),s(t,o)},p(e,o){5&o&&u!==(u=ne(e[17],e[2])+"")&&$(n,u),1&o&&r!==(r=e[17])&&(t.__value=r,f(t,t.__value))},d(e){e&&l(t)}}}function be(e){let t,n,o,s,r;function c(t){e[15](t)}let d={sheds:e[5],origin:e[4]};void 0!==e[6]&&(d.selectedShed=e[6]),t=new $e({props:d}),A.push((()=>function(e,t,n){const o=e.$$.props.selectedShed;void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}(t,0,c)));let h="modal"===e[1]&&ke(e);return{c(){Z(t.$$.fragment),o=a(),h&&h.c(),s=u()},m(e,n){V(t,e,n),i(e,o,n),h&&h.m(e,n),i(e,s,n),r=!0},p(e,o){const i={};var l;32&o&&(i.sheds=e[5]),16&o&&(i.origin=e[4]),!n&&64&o&&(n=!0,i.selectedShed=e[6],l=()=>n=!1,N.push(l)),t.$set(i),"modal"===e[1]?h?h.p(e,o):(h=ke(e),h.c(),h.m(s.parentNode,s)):h&&(h.d(1),h=null)},i(e){r||(G(t.$$.fragment,e),r=!0)},o(e){J(t.$$.fragment,e),r=!1},d(e){e&&(l(o),l(s)),K(t,e),h&&h.d(e)}}}function ke(e){let t,n,o,r,d,u,$;return{c(){t=c("div"),n=c("div"),o=a(),r=c("a"),r.textContent="Done",p(n,"class","okoButtonModalContent"),p(r,"href",d="#"),p(r,"class","button"),p(t,"class","okoButtonModal okoButtonModalDone")},m(l,c){i(l,t,c),s(t,n),s(t,o),s(t,r),u||($=h(r,"click",e[10]),u=!0)},p:_,d(e){e&&l(t),u=!1,$()}}}function we(e){let t,n,o,u,f,v,_,b,k,w,S,x,O,C,E="modal"===e[1]&&e[5].length>0&&ge(e),L=e[5].length>0&&ve(e),M=Y(e[0]),A=[];for(let t=0;t<M.length;t+=1)A[t]=_e(fe(e,M,t));let j=e[5].length>0&&be(e);return{c(){E&&E.c(),t=a(),n=c("div"),o=c("div"),u=d(e[3]),f=a(),L&&L.c(),v=a(),_=c("div"),_.textContent="Leveringsdato",b=a(),k=c("select");for(let e=0;e<A.length;e+=1)A[e].c();w=a(),j&&j.c(),p(o,"id","oko-descrption"),m(o,"margin-bottom","20px"),p(o,"class","svelte-1cot6h0"),p(_,"class","oko-select-headline"),m(_,"font-size","14px"),p(k,"name","okoDeliveryDates"),m(k,"width","100%"),m(k,"margin-bottom","20px"),void 0===e[7]&&B((()=>e[14].call(k))),p(n,"id","oko-shed-custom-div"),p(n,"class",S=D(e[1])+" svelte-1cot6h0"),y(n,"hidden",!e[8])},m(l,r){E&&E.m(l,r),i(l,t,r),i(l,n,r),s(n,o),s(o,u),s(n,f),L&&L.m(n,null),s(n,v),s(n,_),s(n,b),s(n,k);for(let e=0;e<A.length;e+=1)A[e]&&A[e].m(k,null);g(k,e[7],!0),s(n,w),j&&j.m(n,null),x=!0,O||(C=h(k,"change",e[14]),O=!0)},p(e,[o]){if("modal"===e[1]&&e[5].length>0?E?E.p(e,o):(E=ge(e),E.c(),E.m(t.parentNode,t)):E&&(E.d(1),E=null),(!x||8&o)&&$(u,e[3]),e[5].length>0?L?L.p(e,o):(L=ve(e),L.c(),L.m(n,v)):L&&(L.d(1),L=null),5&o){let t;for(M=Y(e[0]),t=0;t<M.length;t+=1){const n=fe(e,M,t);A[t]?A[t].p(n,o):(A[t]=_e(n),A[t].c(),A[t].m(k,null))}for(;t<A.length;t+=1)A[t].d(1);A.length=M.length}129&o&&g(k,e[7]),e[5].length>0?j?(j.p(e,o),32&o&&G(j,1)):(j=be(e),j.c(),G(j,1),j.m(n,null)):j&&(W(),J(j,1,1,(()=>{j=null})),H()),(!x||2&o&&S!==(S=D(e[1])+" svelte-1cot6h0"))&&p(n,"class",S),(!x||258&o)&&y(n,"hidden",!e[8])},i(e){x||(G(j),x=!0)},o(e){J(j),x=!1},d(e){e&&(l(t),l(n)),E&&E.d(e),L&&L.d(),r(A,e),j&&j.d(),O=!1,C()}}}function Se(e,t,n){let{displayOption:o}=t,{locale:s}=t,{description:i}=t,{onSelectShed:l=(()=>{})}=t,{onSelectDeliveryDate:r}=t,{origin:c}=t,{sheds:d=[]}=t,{deliveryDates:a=d[0]&&d[0].delivery_dates}=t,u=d[0],h=a&&a[0],p="inline"===o;return e.$$set=e=>{"displayOption"in e&&n(1,o=e.displayOption),"locale"in e&&n(2,s=e.locale),"description"in e&&n(3,i=e.description),"onSelectShed"in e&&n(11,l=e.onSelectShed),"onSelectDeliveryDate"in e&&n(12,r=e.onSelectDeliveryDate),"origin"in e&&n(4,c=e.origin),"sheds"in e&&n(5,d=e.sheds),"deliveryDates"in e&&n(0,a=e.deliveryDates)},e.$$.update=()=>{2112&e.$$.dirty&&(l(u),n(0,a=u.delivery_dates),h&&u.delivery_dates.includes(h)||n(7,h=a[0])),4224&e.$$.dirty&&r(h)},[a,o,s,i,c,d,u,h,p,function(){n(8,p=!0)},function(){n(8,p=!1)},l,r,function(){u=v(this),n(6,u),n(5,d)},function(){h=v(this),n(7,h),n(0,a)},function(e){u=e,n(6,u)}]}const xe=class extends te{constructor(e){super(),X(this,e,Se,we,x,{displayOption:1,locale:2,description:3,onSelectShed:11,onSelectDeliveryDate:12,origin:4,sheds:5,deliveryDates:0})}},De='input[name="shipping_method[0]"]:checked',Oe="#billing_postcode";class Ce{constructor(e,t,n){this.locale=e,this.displayOption=t,this.homeDeliveryDescription=n.homeDelivery,this.shedDeliveryDescription=n.shedDelivery,this.attachEventListeners()}attachEventListeners(){const e=jQuery,t=this;e(document).on("change",Oe,(function(){e(this).val()&&e("body").trigger("update_checkout")})),e(document).on("update_checkout",(function(){t.setDeliveryDateInput(""),t.setLocationInput(""),t.deliveryOptions&&t.deliveryOptions.$destroy(),e(Oe).val()&&t.populateShippingOptions()}))}async populateShippingOptions(){const{selectedShippingMethod:e,address1:t,address2:n,postalCode:o}=this.getFormData(),s=await this.callApi(e,t,n,o),i=document.querySelector(De).parentElement,l={origin:s.origin,locale:this.locale,onSelectShed:e=>{this.setLocationInput(e.id)},onSelectDeliveryDate:e=>{this.setDeliveryDateInput(e)}};switch(s.type){case"shed-delivery":this.deliveryOptions=new xe({target:i,props:{...l,description:this.shedDeliveryDescription,displayOption:this.displayOption,sheds:s.sheds}});break;case"home-delivery":this.deliveryOptions=new xe({target:i,props:{...l,description:this.homeDeliveryDescription,displayOption:"inline",deliveryDates:s.delivery_dates}})}}async callApi(e,t,n,o){const s=[t,n].filter((e=>e&&""!==e)).join(", "),i=new URLSearchParams({zip:o,address:encodeURIComponent(s)}).toString(),l=new Headers;l.append("Accept","application/json"),l.append("Content-Type","application/json");const r={method:"GET",headers:l,redirect:"follow"};let c;switch(e){case"shed-delivery":c="https://wc.okoskabet.dk/wp-json/wp/v2/okoskabet/sheds?"+i;break;case"home-delivery":c="https://wc.okoskabet.dk/wp-json/wp/v2/okoskabet/home_delivery?"+i}const d=await fetch(c,r),{results:a}=await d.json();return{...a,type:e}}getFormData(){let e;e="hey_okoskabet_shipping_home"===document.querySelector(De).value?"home-delivery":"shed-delivery";const t=document.querySelector(Oe).value;return{selectedShippingMethod:e,address1:document.querySelector("#billing_address_1").value,address2:document.querySelector("#billing_address_2").value,postalCode:t}}setDeliveryDateInput(e){jQuery("#billing_okoskabet_delivery_date").val(e)}setLocationInput(e){jQuery("#billing_okoskabet_shed_id").val(e)}}window.onload=()=>{window.mapboxgl.accessToken="pk.eyJ1IjoiZGFub2tvc2thYmV0IiwiYSI6ImNsOTN5enc5eDF0OXgzcW10ejgyMDI3ZHIifQ.Yy_h5jy-F0E2t0EvnElFag",jQuery((function(){const{locale:e,displayOption:t,descriptions:n}=window._okoskabet_checkout;new Ce(e,t,n)}))}})();