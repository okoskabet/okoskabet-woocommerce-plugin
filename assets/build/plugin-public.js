(()=>{"use strict";new Set;const e="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;class t{_listeners="WeakMap"in e?new WeakMap:void 0;_observer=void 0;options;constructor(e){this.options=e}observe(e,t){return this._listeners.set(e,t),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){return this._observer??(this._observer=new ResizeObserver((e=>{for(const n of e)t.entries.set(n.target,n),this._listeners.get(n.target)?.(n)})))}}t.entries="WeakMap"in e?new WeakMap:void 0;let n,o=!1;function i(e,t){e.appendChild(t)}function s(e,t,n){e.insertBefore(t,n||null)}function l(e){e.parentNode&&e.parentNode.removeChild(e)}function r(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function c(e){return document.createElement(e)}function d(e){return document.createTextNode(e)}function a(){return d(" ")}function u(){return d("")}function p(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function h(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function f(e,t){t=""+t,e.data!==t&&(e.data=t)}function $(e,t){e.value=null==t?"":t}function m(e,t,n,o){null==n?e.style.removeProperty(t):e.style.setProperty(t,n,o?"important":"")}function g(e,t,n){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}function v(e){const t=e.querySelector(":checked");return t&&t.__value}function y(e,t,n){e.classList.toggle(t,!!n)}function _(){}function k(e){return e()}function b(){return Object.create(null)}function w(e){e.forEach(k)}function S(e){return"function"==typeof e}function D(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function x(e){return null==e?"":e}function C(e){n=e}function M(){if(!n)throw new Error("Function called outside component initialization");return n}function O(e){M().$$.on_mount.push(e)}function I(e){M().$$.on_destroy.push(e)}new Map;const E=[],L=[];let j=[];const T=[],N=Promise.resolve();let A=!1;function F(e){j.push(e)}const B=new Set;let P=0;function z(){if(0!==P)return;const e=n;do{try{for(;P<E.length;){const e=E[P];P++,C(e),H(e.$$)}}catch(e){throw E.length=0,P=0,e}for(C(null),E.length=0,P=0;L.length;)L.pop()();for(let e=0;e<j.length;e+=1){const t=j[e];B.has(t)||(B.add(t),t())}j.length=0}while(E.length);for(;T.length;)T.pop()();A=!1,B.clear(),C(e)}function H(e){if(null!==e.fragment){e.update(),w(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(F)}}const V=new Set;let q,W;function Q(){q={r:0,c:[],p:q}}function R(){q.r||w(q.c),q=q.p}function U(e,t){e&&e.i&&(V.delete(e),e.i(t))}function J(e,t,n,o){if(e&&e.o){if(V.has(e))return;V.add(e),q.c.push((()=>{V.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}else o&&o()}function Y(e,t){const n=t.token={};function o(e,o,i,s){if(t.token!==n)return;t.resolved=s;let l=t.ctx;void 0!==i&&(l=l.slice(),l[i]=s);const r=e&&(t.current=e)(l);let c=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==o&&e&&(Q(),J(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),R())})):t.block.d(1),r.c(),U(r,1),r.m(t.mount(),t.anchor),c=!0),t.block=r,t.blocks&&(t.blocks[o]=r),c&&z()}if(!(i=e)||"object"!=typeof i&&"function"!=typeof i||"function"!=typeof i.then){if(t.current!==t.then)return o(t.then,1,t.value,e),!0;t.resolved=e}else{const n=M();if(e.then((e=>{C(n),o(t.then,1,t.value,e),C(null)}),(e=>{if(C(n),o(t.catch,2,t.error,e),C(null),!t.hasCatch)throw e})),t.current!==t.pending)return o(t.pending,0),!0}var i}function Z(e,t,n){const o=t.slice(),{resolved:i}=e;e.current===e.then&&(o[e.value]=i),e.current===e.catch&&(o[e.error]=i),e.block.p(o,n)}function G(e){return void 0!==e?.length?e:Array.from(e)}function X(e){e&&e.c()}function K(e,t,n){const{fragment:o,after_update:i}=e.$$;o&&o.m(t,n),F((()=>{const t=e.$$.on_mount.map(k).filter(S);e.$$.on_destroy?e.$$.on_destroy.push(...t):w(t),e.$$.on_mount=[]})),i.forEach(F)}function ee(e,t){const n=e.$$;null!==n.fragment&&(function(e){const t=[],n=[];j.forEach((o=>-1===e.indexOf(o)?t.push(o):n.push(o))),n.forEach((e=>e())),j=t}(n.after_update),w(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function te(e,t,i,s,r,c,d=null,a=[-1]){const u=n;C(e);const p=e.$$={fragment:null,ctx:[],props:c,update:_,not_equal:r,bound:b(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:b(),dirty:a,skip_bound:!1,root:t.target||u.$$.root};d&&d(p.root);let h=!1;if(p.ctx=i?i(e,t.props||{},((t,n,...o)=>{const i=o.length?o[0]:n;return p.ctx&&r(p.ctx[t],p.ctx[t]=i)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](i),h&&function(e,t){-1===e.$$.dirty[0]&&(E.push(e),A||(A=!0,N.then(z)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),n})):[],p.update(),h=!0,w(p.before_update),p.fragment=!!s&&s(p.ctx),t.target){if(t.hydrate){o=!0;const e=(f=t.target,Array.from(f.childNodes));p.fragment&&p.fragment.l(e),e.forEach(l)}else p.fragment&&p.fragment.c();t.intro&&U(e.$$.fragment),K(e,t.target,t.anchor),o=!1,z()}var f;C(u)}function ne(e,t,n,o){const i=n[e]?.type;if(t="Boolean"===i&&"boolean"!=typeof t?null!=t:t,!o||!n[e])return t;if("toAttribute"===o)switch(i){case"Object":case"Array":return null==t?null:JSON.stringify(t);case"Boolean":return t?"":null;case"Number":return null==t?null:t;default:return t}else switch(i){case"Object":case"Array":return t&&JSON.parse(t);case"Boolean":default:return t;case"Number":return null!=t?+t:t}}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(W=class extends HTMLElement{$$ctor;$$s;$$c;$$cn=!1;$$d={};$$r=!1;$$p_d={};$$l={};$$l_u=new Map;constructor(e,t,n){super(),this.$$ctor=e,this.$$s=t,n&&this.attachShadow({mode:"open"})}addEventListener(e,t,n){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(t),this.$$c){const n=this.$$c.$on(e,t);this.$$l_u.set(t,n)}super.addEventListener(e,t,n)}removeEventListener(e,t,n){if(super.removeEventListener(e,t,n),this.$$c){const e=this.$$l_u.get(t);e&&(e(),this.$$l_u.delete(t))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){if(await Promise.resolve(),!this.$$cn||this.$$c)return;function e(e){return()=>{let t;return{c:function(){t=c("slot"),"default"!==e&&h(t,"name",e)},m:function(e,n){s(e,t,n)},d:function(e){e&&l(t)}}}}const t={},n=function(e){const t={};return e.childNodes.forEach((e=>{t[e.slot||"default"]=!0})),t}(this);for(const i of this.$$s)i in n&&(t[i]=[e(i)]);for(const r of this.attributes){const d=this.$$g_p(r.name);d in this.$$d||(this.$$d[d]=ne(d,r.value,this.$$p_d,"toProp"))}for(const a in this.$$p_d)a in this.$$d||void 0===this[a]||(this.$$d[a]=this[a],delete this[a]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:t,$$scope:{ctx:[]}}});const o=()=>{this.$$r=!0;for(const e in this.$$p_d)if(this.$$d[e]=this.$$c.$$.ctx[this.$$c.$$.props[e]],this.$$p_d[e].reflect){const t=ne(e,this.$$d[e],this.$$p_d,"toAttribute");null==t?this.removeAttribute(this.$$p_d[e].attribute||e):this.setAttribute(this.$$p_d[e].attribute||e,t)}this.$$r=!1};this.$$c.$$.after_update.push(o),o();for(const u in this.$$l)for(const p of this.$$l[u]){const f=this.$$c.$on(u,p);this.$$l_u.set(p,f)}this.$$l={}}}attributeChangedCallback(e,t,n){this.$$r||(e=this.$$g_p(e),this.$$d[e]=ne(e,n,this.$$p_d,"toProp"),this.$$c?.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then((()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$c=void 0)}))}$$g_p(e){return Object.keys(this.$$p_d).find((t=>this.$$p_d[t].attribute===e||!this.$$p_d[t].attribute&&t.toLowerCase()===e))||e}});class oe{$$=void 0;$$set=void 0;$destroy(){ee(this,1),this.$destroy=_}$on(e,t){if(!S(t))return _;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}async function ie(e,t,n){const o=new URLSearchParams({zip:n,address:encodeURIComponent(t)}).toString(),i=new Headers;i.append("Accept","application/json"),i.append("Content-Type","application/json");const s={method:"GET",headers:i,redirect:"follow"},l=function(e){switch(e){case"shed-delivery":return"/wp-json/wp/v2/okoskabet/sheds?";case"home-delivery":return"/wp-json/wp/v2/okoskabet/home_delivery?"}}(e)+o,r=await fetch(l,s),{results:c}=await r.json();return{...c,type:e}}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");const se=(e,t)=>{const n=t.replace("_","-"),o=new Date(e).toLocaleDateString(n,{year:"numeric",month:"long",day:"numeric",weekday:"long",timeZone:"UTC"});return o.charAt(0).toUpperCase()+o.slice(1)};function le(e){e[8]=e[9].delivery_dates}function re(e,t,n){const o=e.slice();return o[10]=t[n],o}function ce(e){return{c:_,m:_,p:_,d:_}}function de(e){let t;function n(e,t){return 0===e[8].length?ue:ae}le(e);let o=n(e),i=o(e);return{c(){i.c(),t=u()},m(e,n){i.m(e,n),s(e,t,n)},p(e,s){le(e),o===(o=n(e))&&i?i.p(e,s):(i.d(1),i=o(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){e&&l(t),i.d(e)}}}function ae(e){let t,n,o,i,d,u=G(e[8]),f=[];for(let t=0;t<u.length;t+=1)f[t]=pe(re(e,u,t));return{c(){t=c("div"),t.textContent="Leveringsdato",n=a(),o=c("select");for(let e=0;e<f.length;e+=1)f[e].c();h(t,"class","oko-select-headline"),m(t,"font-size","14px"),h(o,"name","okoDeliveryDates"),m(o,"width","100%"),m(o,"margin-bottom","20px"),void 0===e[2]&&F((()=>e[7].call(o)))},m(l,r){s(l,t,r),s(l,n,r),s(l,o,r);for(let e=0;e<f.length;e+=1)f[e]&&f[e].m(o,null);g(o,e[2],!0),i||(d=p(o,"change",e[7]),i=!0)},p(e,t){if(9&t){let n;for(u=G(e[8]),n=0;n<u.length;n+=1){const i=re(e,u,n);f[n]?f[n].p(i,t):(f[n]=pe(i),f[n].c(),f[n].m(o,null))}for(;n<f.length;n+=1)f[n].d(1);f.length=u.length}12&t&&g(o,e[2])},d(e){e&&(l(t),l(n),l(o)),r(f,e),i=!1,d()}}}function ue(e){let t;return{c(){t=c("span"),t.textContent="Ingen tilgængelige datoer."},m(e,n){s(e,t,n)},p:_,d(e){e&&l(t)}}}function pe(e){let t,n,o,r,u=se(e[10],e[0])+"";return{c(){t=c("option"),n=d(u),o=a(),t.__value=r=e[10],$(t,t.__value)},m(e,l){s(e,t,l),i(t,n),i(t,o)},p(e,o){9&o&&u!==(u=se(e[10],e[0])+"")&&f(n,u),8&o&&r!==(r=e[10])&&(t.__value=r,$(t,t.__value))},d(e){e&&l(t)}}}function he(e){let t;return{c(){t=c("span"),h(t,"class","skeleton-loader svelte-1tyjt2z")},m(e,n){s(e,t,n)},p:_,d(e){e&&l(t)}}}function fe(e){let t,n,o,r,u,p={ctx:e,current:null,token:null,hasCatch:!1,pending:he,then:de,catch:ce,value:9};return Y(u=e[3],p),{c(){t=c("div"),n=c("div"),o=d(e[1]),r=a(),p.block.c(),h(n,"class","description svelte-1tyjt2z")},m(e,l){s(e,t,l),i(t,n),i(n,o),i(t,r),p.block.m(t,p.anchor=null),p.mount=()=>t,p.anchor=null},p(t,[n]){e=t,2&n&&f(o,e[1]),p.ctx=e,8&n&&u!==(u=e[3])&&Y(u,p)||Z(p,e,n)},i:_,o:_,d(e){e&&l(t),p.block.d(),p.token=null,p=null}}}function $e(e,t,n){let o,i,{locale:s}=t,{description:l}=t,{address:r}=t,{postalCode:c}=t,{onSelectDeliveryDate:d}=t;return e.$$set=e=>{"locale"in e&&n(0,s=e.locale),"description"in e&&n(1,l=e.description),"address"in e&&n(4,r=e.address),"postalCode"in e&&n(5,c=e.postalCode),"onSelectDeliveryDate"in e&&n(6,d=e.onSelectDeliveryDate)},e.$$.update=()=>{68&e.$$.dirty&&i&&d(i),48&e.$$.dirty&&n(3,o=ie("home-delivery",r,c))},[s,l,i,o,r,c,d,function(){i=v(this),n(2,i),n(3,o),n(4,r),n(5,c)}]}const me=class extends oe{constructor(e){super(),te(this,e,$e,fe,D,{locale:0,description:1,address:4,postalCode:5,onSelectDeliveryDate:6})}};function ge(e,t,n){let o,{map:i}=t,{origin:s}=t;return O((()=>{const e={lng:s.longitude,lat:s.latitude};o=(new window.mapboxgl.Marker).setLngLat(e).addTo(i)})),I((()=>{o&&o.remove()})),e.$$set=e=>{"map"in e&&n(0,i=e.map),"origin"in e&&n(1,s=e.origin)},[i,s]}const ve=class extends oe{constructor(e){super(),te(this,e,ge,null,D,{map:0,origin:1})}};function ye(e){let t,n,o,r,u,p,$,m,g,v,k,b,w,S,D=e[0].name+"",x=e[0].address.address+"",C=e[0].address.postal_code+"",M=e[0].address.city+"";return{c(){t=c("div"),n=a(),o=c("div"),r=c("h6"),u=d(D),p=a(),$=c("div"),m=d(x),g=a(),v=c("div"),k=d(C),b=a(),w=d(M),h(t,"class","marker svelte-ge6ukn"),y(t,"selected",e[0].id===e[1]),h(r,"class","svelte-ge6ukn"),h(o,"data-shed",S=e[0].id)},m(l,c){s(l,t,c),e[7](t),s(l,n,c),s(l,o,c),i(o,r),i(r,u),i(o,p),i(o,$),i($,m),i(o,g),i(o,v),i(v,k),i(v,b),i(v,w),e[8](o)},p(e,[n]){3&n&&y(t,"selected",e[0].id===e[1]),1&n&&D!==(D=e[0].name+"")&&f(u,D),1&n&&x!==(x=e[0].address.address+"")&&f(m,x),1&n&&C!==(C=e[0].address.postal_code+"")&&f(k,C),1&n&&M!==(M=e[0].address.city+"")&&f(w,M),1&n&&S!==(S=e[0].id)&&h(o,"data-shed",S)},i:_,o:_,d(i){i&&(l(t),l(n),l(o)),e[7](null),e[8](null)}}}function _e(e,t,n){let o,i,s,{map:l}=t,{shed:r}=t,{selectedShedId:c}=t,{onClick:d}=t,{onClickAway:a}=t;return O((()=>{const e={lng:r.address.longitude,lat:r.address.latitude},t=new window.mapboxgl.Popup({offset:20,closeButton:!1}).setDOMContent(i).on("open",(e=>{d(e.target)})).on("close",a);s=new window.mapboxgl.Marker({element:o}).setLngLat(e).setPopup(t).addTo(l)})),I((()=>{s&&s.remove()})),e.$$set=e=>{"map"in e&&n(4,l=e.map),"shed"in e&&n(0,r=e.shed),"selectedShedId"in e&&n(1,c=e.selectedShedId),"onClick"in e&&n(5,d=e.onClick),"onClickAway"in e&&n(6,a=e.onClickAway)},[r,c,o,i,l,d,a,function(e){L[e?"unshift":"push"]((()=>{o=e,n(2,o)}))},function(e){L[e?"unshift":"push"]((()=>{i=e,n(3,i)}))}]}const ke=class extends oe{constructor(e){super(),te(this,e,_e,ye,D,{map:4,shed:0,selectedShedId:1,onClick:5,onClickAway:6})}};function be(e,t,n){const o=e.slice();return o[9]=t[n],o}function we(e){let t,n,o,i=G(e[2]),c=[];for(let t=0;t<i.length;t+=1)c[t]=Se(be(e,i,t));const d=e=>J(c[e],1,1,(()=>{c[e]=null}));let p=e[1]&&De(e);return{c(){for(let e=0;e<c.length;e+=1)c[e].c();t=a(),p&&p.c(),n=u()},m(e,i){for(let t=0;t<c.length;t+=1)c[t]&&c[t].m(e,i);s(e,t,i),p&&p.m(e,i),s(e,n,i),o=!0},p(e,o){if(109&o){let n;for(i=G(e[2]),n=0;n<i.length;n+=1){const s=be(e,i,n);c[n]?(c[n].p(s,o),U(c[n],1)):(c[n]=Se(s),c[n].c(),U(c[n],1),c[n].m(t.parentNode,t))}for(Q(),n=i.length;n<c.length;n+=1)d(n);R()}e[1]?p?(p.p(e,o),2&o&&U(p,1)):(p=De(e),p.c(),U(p,1),p.m(n.parentNode,n)):p&&(Q(),J(p,1,1,(()=>{p=null})),R())},i(e){if(!o){for(let e=0;e<i.length;e+=1)U(c[e]);U(p),o=!0}},o(e){c=c.filter(Boolean);for(let e=0;e<c.length;e+=1)J(c[e]);J(p),o=!1},d(e){e&&(l(t),l(n)),r(c,e),p&&p.d(e)}}}function Se(e){let t,n;return t=new ke({props:{map:e[3],shed:e[9],selectedShedId:e[0],onClickAway:e[6],onClick:e[5](e[9])}}),{c(){X(t.$$.fragment)},m(e,o){K(t,e,o),n=!0},p(e,n){const o={};8&n&&(o.map=e[3]),4&n&&(o.shed=e[9]),1&n&&(o.selectedShedId=e[0]),4&n&&(o.onClick=e[5](e[9])),t.$set(o)},i(e){n||(U(t.$$.fragment,e),n=!0)},o(e){J(t.$$.fragment,e),n=!1},d(e){ee(t,e)}}}function De(e){let t,n;return t=new ve({props:{origin:e[1],map:e[3]}}),{c(){X(t.$$.fragment)},m(e,o){K(t,e,o),n=!0},p(e,n){const o={};2&n&&(o.origin=e[1]),8&n&&(o.map=e[3]),t.$set(o)},i(e){n||(U(t.$$.fragment,e),n=!0)},o(e){J(t.$$.fragment,e),n=!1},d(e){ee(t,e)}}}function xe(e){let t,n,o,r,d,p=e[3]&&we(e);return{c(){t=c("div"),n=c("div"),o=a(),p&&p.c(),r=u(),h(n,"class","map svelte-1cepocy"),h(t,"class","map-wrap svelte-1cepocy")},m(l,c){s(l,t,c),i(t,n),e[8](n),s(l,o,c),p&&p.m(l,c),s(l,r,c),d=!0},p(e,[t]){e[3]?p?(p.p(e,t),8&t&&U(p,1)):(p=we(e),p.c(),U(p,1),p.m(r.parentNode,r)):p&&(Q(),J(p,1,1,(()=>{p=null})),R())},i(e){d||(U(p),d=!0)},o(e){J(p),d=!1},d(n){n&&(l(t),l(o),l(r)),e[8](null),p&&p.d(n)}}}function Ce(e,t,n){let o,i,s,{origin:l}=t,{sheds:r}=t,{selectedShedId:c}=t;const d=()=>{n(7,s=void 0)};return O((()=>{const e=l?{lng:l.longitude,lat:l.latitude}:{lng:r[0].address.longitude,lat:r[0].address.latitude};n(3,o=new window.mapboxgl.Map({container:i,style:"mapbox://styles/mapbox/streets-v12",center:e,zoom:11}));const t=new window.mapboxgl.LngLatBounds;if(r.forEach((({address:{latitude:e,longitude:n}})=>{const o={lng:n,lat:e};t.extend(o)})),l){const e={lng:l.longitude,lat:l.latitude};t.extend(e)}o.fitBounds(t,{padding:5})})),I((()=>{o&&o.remove()})),e.$$set=e=>{"origin"in e&&n(1,l=e.origin),"sheds"in e&&n(2,r=e.sheds),"selectedShedId"in e&&n(0,c=e.selectedShedId)},e.$$.update=()=>{129&e.$$.dirty&&s&&s.shed.id!==c&&(s.popup.remove(),d())},[c,l,r,o,i,e=>t=>{n(0,c=e.id),n(7,s={popup:t,shed:e})},d,s,function(e){L[e?"unshift":"push"]((()=>{i=e,n(4,i)}))}]}const Me=class extends oe{constructor(e){super(),te(this,e,Ce,xe,D,{origin:1,sheds:2,selectedShedId:0})}};function Oe(e){e[18]=e[20].origin,e[19]=e[20].sheds;const t=e[19].find((t=>t.id===e[3]))||e[19][0];e[21]=t}function Ie(e,t,n){const o=e.slice();return o[22]=t[n],o}function Ee(e,t,n){const o=e.slice();return o[25]=t[n],o}function Le(e){return{c:_,m:_,p:_,i:_,o:_,d:_}}function je(e){let t,n,o,r,p,$,m,g,v,_;Oe(e);const k=[Ne,Te],b=[];function w(e,t){return 0===e[21].delivery_dates.length?0:1}p=w(e),$=b[p]=k[p](e);let S="modal"===e[0]&&Pe(e);return{c(){t=c("div"),n=c("div"),o=d(e[2]),r=a(),$.c(),g=a(),S&&S.c(),v=u(),h(n,"class","description svelte-amce9"),h(t,"class",m=x(e[0])+" svelte-amce9"),y(t,"hidden",!e[5])},m(e,l){s(e,t,l),i(t,n),i(n,o),i(t,r),b[p].m(t,null),s(e,g,l),S&&S.m(e,l),s(e,v,l),_=!0},p(e,n){Oe(e),(!_||4&n)&&f(o,e[2]);let i=p;p=w(e),p===i?b[p].p(e,n):(Q(),J(b[i],1,1,(()=>{b[i]=null})),R(),$=b[p],$?$.p(e,n):($=b[p]=k[p](e),$.c()),U($,1),$.m(t,null)),(!_||1&n&&m!==(m=x(e[0])+" svelte-amce9"))&&h(t,"class",m),(!_||33&n)&&y(t,"hidden",!e[5]),"modal"===e[0]?S?S.p(e,n):(S=Pe(e),S.c(),S.m(v.parentNode,v)):S&&(S.d(1),S=null)},i(e){_||(U($),_=!0)},o(e){J($),_=!1},d(e){e&&(l(t),l(g),l(v)),b[p].d(),S&&S.d(e)}}}function Te(e){let t,n,o,i,d,f,$,v,y,_,k,b,S,D,x,C=G(e[19]),M=[];for(let t=0;t<C.length;t+=1)M[t]=Ae(Ee(e,C,t));let O=G(e[21].delivery_dates),I=[];for(let t=0;t<O.length;t+=1)I[t]=Fe(Ie(e,O,t));function E(t){e[15](t)}let j={sheds:e[19],origin:e[18]};void 0!==e[3]&&(j.selectedShedId=e[3]),y=new Me({props:j}),L.push((()=>function(e,t,n){const o=e.$$.props.selectedShedId;void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}(y,0,E)));let N="modal"===e[0]&&Be(e);return{c(){t=c("div"),t.textContent="Økoskab",n=a(),o=c("select");for(let e=0;e<M.length;e+=1)M[e].c();i=a(),d=c("div"),d.textContent="Leveringsdato",f=a(),$=c("select");for(let e=0;e<I.length;e+=1)I[e].c();v=a(),X(y.$$.fragment),k=a(),N&&N.c(),b=u(),h(t,"class","oko-select-headline"),m(t,"font-size","14px"),h(o,"name","okoLocations"),h(o,"id","locationsDropdown"),m(o,"width","100%"),m(o,"margin-top","0"),m(o,"margin-bottom","20px"),void 0===e[3]&&F((()=>e[13].call(o))),h(d,"class","oko-select-headline"),m(d,"font-size","14px"),h($,"name","okoDeliveryDates"),m($,"width","100%"),m($,"margin-bottom","20px"),void 0===e[4]&&F((()=>e[14].call($)))},m(l,r){s(l,t,r),s(l,n,r),s(l,o,r);for(let e=0;e<M.length;e+=1)M[e]&&M[e].m(o,null);g(o,e[3],!0),s(l,i,r),s(l,d,r),s(l,f,r),s(l,$,r);for(let e=0;e<I.length;e+=1)I[e]&&I[e].m($,null);g($,e[4],!0),s(l,v,r),K(y,l,r),s(l,k,r),N&&N.m(l,r),s(l,b,r),S=!0,D||(x=[p(o,"change",e[13]),p($,"change",e[14])],D=!0)},p(e,t){if(64&t){let n;for(C=G(e[19]),n=0;n<C.length;n+=1){const i=Ee(e,C,n);M[n]?M[n].p(i,t):(M[n]=Ae(i),M[n].c(),M[n].m(o,null))}for(;n<M.length;n+=1)M[n].d(1);M.length=C.length}if(72&t&&g(o,e[3]),74&t){let n;for(O=G(e[21].delivery_dates),n=0;n<O.length;n+=1){const o=Ie(e,O,n);I[n]?I[n].p(o,t):(I[n]=Fe(o),I[n].c(),I[n].m($,null))}for(;n<I.length;n+=1)I[n].d(1);I.length=O.length}88&t&&g($,e[4]);const n={};var i;64&t&&(n.sheds=e[19]),64&t&&(n.origin=e[18]),!_&&8&t&&(_=!0,n.selectedShedId=e[3],i=()=>_=!1,T.push(i)),y.$set(n),"modal"===e[0]?N?N.p(e,t):(N=Be(e),N.c(),N.m(b.parentNode,b)):N&&(N.d(1),N=null)},i(e){S||(U(y.$$.fragment,e),S=!0)},o(e){J(y.$$.fragment,e),S=!1},d(e){e&&(l(t),l(n),l(o),l(i),l(d),l(f),l($),l(v),l(k),l(b)),r(M,e),r(I,e),ee(y,e),N&&N.d(e),D=!1,w(x)}}}function Ne(e){let t;return{c(){t=c("span"),t.textContent="Ingen tilgængelige datoer."},m(e,n){s(e,t,n)},p:_,i:_,o:_,d(e){e&&l(t)}}}function Ae(e){let t,n,o,r,u=e[25].name+"";return{c(){t=c("option"),n=d(u),o=a(),t.__value=r=e[25].id,$(t,t.__value)},m(e,l){s(e,t,l),i(t,n),i(t,o)},p(e,o){64&o&&u!==(u=e[25].name+"")&&f(n,u),64&o&&r!==(r=e[25].id)&&(t.__value=r,$(t,t.__value))},d(e){e&&l(t)}}}function Fe(e){let t,n,o,r,u=se(e[22],e[1])+"";return{c(){t=c("option"),n=d(u),o=a(),t.__value=r=e[22],$(t,t.__value)},m(e,l){s(e,t,l),i(t,n),i(t,o)},p(e,o){74&o&&u!==(u=se(e[22],e[1])+"")&&f(n,u),72&o&&r!==(r=e[22])&&(t.__value=r,$(t,t.__value))},d(e){e&&l(t)}}}function Be(e){let t,n,o,r,d,u,f;return{c(){t=c("div"),n=c("div"),o=a(),r=c("a"),r.textContent="Done",h(n,"class","okoButtonModalContent"),h(r,"href",d="#"),h(r,"class","button"),h(t,"class","okoButtonModal okoButtonModalDone")},m(l,c){s(l,t,c),i(t,n),i(t,o),i(t,r),u||(f=p(r,"click",e[8]),u=!0)},p:_,d(e){e&&l(t),u=!1,f()}}}function Pe(e){let t,n,o,r,u,$,g,v,y,_,k,b,w,S,D,x,C,M,O,I,E=e[21]?.name+"",L=(e[4]&&se(e[4],e[1]))+"";return{c(){t=c("div"),n=d(e[2]),o=a(),r=c("div"),u=c("div"),$=c("span"),$.textContent="Økoskab:",g=a(),v=c("span"),y=d(E),_=a(),k=c("div"),b=c("span"),b.textContent="Levering:",w=a(),S=c("span"),D=d(L),x=a(),C=c("a"),C.textContent="Vælg Økoskab",h(t,"class","description svelte-amce9"),h($,"class","oko-shed-content-label svelte-amce9"),h(v,"class","oko-shed-content-value svelte-amce9"),h(u,"id","oko-shed-content-location"),h(b,"class","oko-shed-content-label svelte-amce9"),h(S,"class","oko-shed-content-value svelte-amce9"),h(k,"id","oko-shed-content-date"),h(r,"id","oko-shed-content"),h(r,"class","svelte-amce9"),h(C,"href",M="#"),h(C,"class","button"),m(C,"margin-bottom","20px")},m(l,c){s(l,t,c),i(t,n),s(l,o,c),s(l,r,c),i(r,u),i(u,$),i(u,g),i(u,v),i(v,y),i(r,_),i(r,k),i(k,b),i(k,w),i(k,S),i(S,D),s(l,x,c),s(l,C,c),O||(I=p(C,"click",e[7]),O=!0)},p(e,t){4&t&&f(n,e[2]),72&t&&E!==(E=e[21]?.name+"")&&f(y,E),18&t&&L!==(L=(e[4]&&se(e[4],e[1]))+"")&&f(D,L)},d(e){e&&(l(t),l(o),l(r),l(x),l(C)),O=!1,I()}}}function ze(e){let t,n,o,r;return{c(){t=c("div"),n=d(e[2]),o=a(),r=c("div"),r.innerHTML='<span class="skeleton-loader svelte-amce9"></span>',h(t,"class","description svelte-amce9"),h(r,"class","skeleton-container svelte-amce9")},m(e,l){s(e,t,l),i(t,n),s(e,o,l),s(e,r,l)},p(e,t){4&t&&f(n,e[2])},i:_,o:_,d(e){e&&(l(t),l(o),l(r))}}}function He(e){let t,n,o,i={ctx:e,current:null,token:null,hasCatch:!1,pending:ze,then:je,catch:Le,value:20,blocks:[,,,]};return Y(n=e[6],i),{c(){t=u(),i.block.c()},m(e,n){s(e,t,n),i.block.m(e,i.anchor=n),i.mount=()=>t.parentNode,i.anchor=t,o=!0},p(t,[o]){e=t,i.ctx=e,64&o&&n!==(n=e[6])&&Y(n,i)||Z(i,e,o)},i(e){o||(U(i.block),o=!0)},o(e){for(let e=0;e<3;e+=1)J(i.blocks[e]);o=!1},d(e){e&&l(t),i.block.d(e),i.token=null,i=null}}}function Ve(e,t,n){let o;var i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,s){function l(e){try{c(o.next(e))}catch(e){s(e)}}function r(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,r)}c((o=o.apply(e,t||[])).next())}))};let s,l,{displayMode:r}=t,{locale:c}=t,{description:d}=t,{address:a}=t,{postalCode:u}=t,{onSelectShed:p=()=>{}}=t,{onSelectDeliveryDate:h}=t,f="inline"===r;return e.$$set=e=>{"displayMode"in e&&n(0,r=e.displayMode),"locale"in e&&n(1,c=e.locale),"description"in e&&n(2,d=e.description),"address"in e&&n(9,a=e.address),"postalCode"in e&&n(10,u=e.postalCode),"onSelectShed"in e&&n(11,p=e.onSelectShed),"onSelectDeliveryDate"in e&&n(12,h=e.onSelectDeliveryDate)},e.$$.update=()=>{2056&e.$$.dirty&&s&&(p(s),function(){i(this,void 0,void 0,(function*(){if(s){const{sheds:e}=yield o,t=e.find((e=>e.id===s)),i=null==t?void 0:t.delivery_dates;l&&(null==t?void 0:t.delivery_dates.includes(l))||n(4,l=i&&i[0])}else n(4,l=void 0)}))}()),4112&e.$$.dirty&&l&&h(l),1536&e.$$.dirty&&n(6,o=ie("shed-delivery",a,u))},[r,c,d,s,l,f,o,function(e){e.preventDefault(),n(5,f=!0)},function(e){e.preventDefault(),n(5,f=!1)},a,u,p,h,function(){s=v(this),n(3,s),n(6,o),n(9,a),n(10,u)},function(){l=v(this),n(4,l),n(6,o),n(9,a),n(10,u),n(3,s)},function(e){s=e,n(3,s)}]}const qe=class extends oe{constructor(e){super(),te(this,e,Ve,He,D,{displayMode:0,locale:1,description:2,address:9,postalCode:10,onSelectShed:11,onSelectDeliveryDate:12})}};function We(e){let t,n;return t=new me({props:{locale:e[0],address:e[4],postalCode:e[5],onSelectDeliveryDate:e[7],description:e[2].homeDeliveryDescription}}),{c(){X(t.$$.fragment)},m(e,o){K(t,e,o),n=!0},p(e,n){const o={};1&n&&(o.locale=e[0]),16&n&&(o.address=e[4]),32&n&&(o.postalCode=e[5]),128&n&&(o.onSelectDeliveryDate=e[7]),4&n&&(o.description=e[2].homeDeliveryDescription),t.$set(o)},i(e){n||(U(t.$$.fragment,e),n=!0)},o(e){J(t.$$.fragment,e),n=!1},d(e){ee(t,e)}}}function Qe(e){let t,n;return t=new qe({props:{displayMode:e[1],locale:e[0],address:e[4],postalCode:e[5],onSelectShed:e[6],onSelectDeliveryDate:e[7],description:e[2].shedDeliveryDescription}}),{c(){X(t.$$.fragment)},m(e,o){K(t,e,o),n=!0},p(e,n){const o={};2&n&&(o.displayMode=e[1]),1&n&&(o.locale=e[0]),16&n&&(o.address=e[4]),32&n&&(o.postalCode=e[5]),64&n&&(o.onSelectShed=e[6]),128&n&&(o.onSelectDeliveryDate=e[7]),4&n&&(o.description=e[2].shedDeliveryDescription),t.$set(o)},i(e){n||(U(t.$$.fragment,e),n=!0)},o(e){J(t.$$.fragment,e),n=!1},d(e){ee(t,e)}}}function Re(e){let t,n,o,i;const r=[Qe,We],c=[];function d(e,t){return"shed-delivery"===e[3]?0:"home-delivery"===e[3]?1:-1}return~(t=d(e))&&(n=c[t]=r[t](e)),{c(){n&&n.c(),o=u()},m(e,n){~t&&c[t].m(e,n),s(e,o,n),i=!0},p(e,[i]){let s=t;t=d(e),t===s?~t&&c[t].p(e,i):(n&&(Q(),J(c[s],1,1,(()=>{c[s]=null})),R()),~t?(n=c[t],n?n.p(e,i):(n=c[t]=r[t](e),n.c()),U(n,1),n.m(o.parentNode,o)):n=null)},i(e){i||(U(n),i=!0)},o(e){J(n),i=!1},d(e){e&&l(o),~t&&c[t].d(e)}}}function Ue(e,t,n){let{locale:o}=t,{displayMode:i}=t,{strings:s}=t,{shippingMethod:l}=t,{address:r}=t,{postalCode:c}=t,{onSelectShed:d}=t,{onSelectDeliveryDate:a}=t;return e.$$set=e=>{"locale"in e&&n(0,o=e.locale),"displayMode"in e&&n(1,i=e.displayMode),"strings"in e&&n(2,s=e.strings),"shippingMethod"in e&&n(3,l=e.shippingMethod),"address"in e&&n(4,r=e.address),"postalCode"in e&&n(5,c=e.postalCode),"onSelectShed"in e&&n(6,d=e.onSelectShed),"onSelectDeliveryDate"in e&&n(7,a=e.onSelectDeliveryDate)},[o,i,s,l,r,c,d,a]}const Je=class extends oe{constructor(e){super(),te(this,e,Ue,Re,D,{locale:0,displayMode:1,strings:2,shippingMethod:3,address:4,postalCode:5,onSelectShed:6,onSelectDeliveryDate:7})}},Ye='input[name="shipping_method[0]"]:checked',Ze='input[name="shipping_method[0]"][type="hidden"]';class Ge{constructor(e,t,n){this.locale=e,this.displayOption=t,this.homeDeliveryDescription=n.homeDelivery,this.shedDeliveryDescription=n.shedDelivery,this.attachEventListeners()}attachEventListeners(){const e=jQuery,t=this;e(document).on("updated_checkout",(function(){t.deliveryOptions?.$destroy(),t.deliveryOptions=void 0,setTimeout((()=>{t.deliveryOptions?t.updateShippingOptions():t.populateShippingOptions()}),200)})),e(document).on("applied_coupon_in_checkout",(function(){t.deliveryOptions?.$destroy(),t.deliveryOptions=void 0,setTimeout((()=>{t.deliveryOptions?t.updateShippingOptions():t.populateShippingOptions()}),200)})),e(document).on("removed_coupon_in_checkout",(function(){t.deliveryOptions?.$destroy(),t.deliveryOptions=void 0,setTimeout((()=>{t.deliveryOptions?t.updateShippingOptions():t.populateShippingOptions()}),200)})),e(document).on("change","input.shipping_method",(function(){t.deliveryOptions?.$destroy(),t.deliveryOptions=void 0,t.clearInputs()}))}populateShippingOptions(){const e=this.getShippingData();if(!e)return;const t=this.createSvelteTarget();if(!t)return void console.error("Failed to populate shipping options - no target element found");const{shippingMethod:n,address:o,postalCode:i}=e;this.deliveryOptions=new Je({target:t,props:{displayMode:this.displayOption,shippingMethod:n,address:o,postalCode:i,locale:this.locale,strings:{shedDeliveryDescription:this.shedDeliveryDescription,homeDeliveryDescription:this.homeDeliveryDescription},onSelectShed:e=>{this.setLocationInput(e)},onSelectDeliveryDate:e=>{this.setDeliveryDateInput(e)}}})}updateShippingOptions(){const e=this.getShippingData();if(!e)return this.deliveryOptions?.$destroy(),void this.clearInputs();const{shippingMethod:t,address:n,postalCode:o}=e;this.deliveryOptions?.$set({shippingMethod:t,address:n,postalCode:o})}createSvelteTarget(){const e=this.getSelectedShippingMethodElement()?.parentElement;if(e){const t=document.createElement("div");return t.id="okoskabet-shipping",e.after(t),t}return null}getShippingData(){const e=this.getSelectedShippingMethod(),t=this.getFormFieldValue("#billing_postcode")?.trim(),n=this.getFormFieldValue("#billing_address_1")?.trim(),o=this.getFormFieldValue("#billing_address_2")?.trim(),i=[n,o].filter((e=>e&&""!==e)).join(", ");if(e&&t)return{shippingMethod:e,address:i,postalCode:t}}getSelectedShippingMethodElement(){const e=document.querySelector(Ye);if(e instanceof HTMLInputElement)return e;const t=document.querySelector(Ze);return t instanceof HTMLInputElement?t:void 0}getSelectedShippingMethod(){const e=this.getFormFieldValue(Ye),t=this.getFormFieldValue(Ze);switch(e||t){case"hey_okoskabet_shipping_home":return"home-delivery";case"hey_okoskabet_shipping_shed":return"shed-delivery"}}getFormFieldValue(e){const t=document.querySelector(e);if(t instanceof HTMLInputElement)return t.value}clearInputs(){this.setLocationInput(""),this.setDeliveryDateInput("")}setDeliveryDateInput(e){jQuery("#billing_okoskabet_delivery_date").val(e)}setLocationInput(e){jQuery("#billing_okoskabet_shed_id").val(e)}}window.addEventListener("DOMContentLoaded",(function(){const{locale:e,displayOption:t,descriptions:n}=window._okoskabet_checkout;new Ge(e,t,n),window.mapboxgl.accessToken="pk.eyJ1IjoiZGFub2tvc2thYmV0IiwiYSI6ImNsOTN5enc5eDF0OXgzcW10ejgyMDI3ZHIifQ.Yy_h5jy-F0E2t0EvnElFag"})),window.onload=()=>{}})();